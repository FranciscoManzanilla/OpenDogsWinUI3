<?xml version="1.0" encoding="utf-8"?>
<Page
    x:Class="OpenDogs.Views.WExplorer"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="using:OpenDogs.Views"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:storage="using:Windows.Storage" xmlns:local1="using:OpenDogs.Helpers"
    mc:Ignorable="d">
    <Page.Resources>
        <MenuFlyout x:Key="FileContextMenu">
            <MenuFlyoutItem Text="Share">
                <MenuFlyoutItem.Icon>
                    <FontIcon Glyph="&#xE72D;" />
                </MenuFlyoutItem.Icon>
            </MenuFlyoutItem>
            <!--<MenuFlyoutItem Text="Copy" Click="Copy_Click" Icon="Copy"/>
            <MenuFlyoutItem Text="Delete" Click="Delete_Click" Icon="Delete"/>
            <MenuFlyoutSeparator/>
            <MenuFlyoutItem Text="Rename" Click="Rename_Click"/>
            <MenuFlyoutItem Text="Select" Click="Select_Click"/>-->
            <MenuFlyoutSeparator/>
            <!-- Opciones personalizadas para virtuales -->
            <MenuFlyoutItem x:Name="VirtualXbgOption" Text="Export XBG to OBJ" Click="VirtualXbgOption_Click" Visibility="Collapsed"/>
            <!--<MenuFlyoutItem x:Name="VirtualXbgView" Text="View Model" Click="VirtualXbgOption_Click" Visibility="Collapsed"/>-->
            <!--<MenuFlyoutItem x:Name="VirtualXbtOption" Text="Export XBT to DDS" Click="VirtualXbtOption_Click" Visibility="Collapsed"/>-->
            <!--<MenuFlyoutItem x:Name="VirtualXbtView" Text="View Texture" Click="VirtualXbtOption_Click" Visibility="Collapsed"/>-->
            <MenuFlyoutItem x:Name="VirtualXbtMod" Text="Add Texture to Mod Creator for edit" Click="ExtractDDS" Visibility="Collapsed"/>

            <MenuFlyoutItem x:Name="WatchPlay" Text="Play Game" Icon="Play" Click="PlayGame" Visibility="Collapsed"/>



        </MenuFlyout>
    </Page.Resources>

    <Grid Background="Black">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <!-- Botón para regresar -->
        <Button Content="⬅"
                Margin="8"
                Click="BackButton_Click"
                IsEnabled="False"
                x:Name="BackButton"/>
        <TextBox x:Name="SearchBox"
         PlaceholderText="Search files..."
         TextChanged="SearchBox_TextChanged"
                 Width="200"
         Margin="10,10,10,10"/>


        <!-- GridView para mostrar archivos y carpetas -->
        <GridView x:Name="FileGrid"
                  Grid.Row="1"
                  Margin="4"
                  IsItemClickEnabled="True"
                  ItemClick="FileGrid_ItemClick">
            <GridView.ItemTemplate>
                <DataTemplate x:DataType="local1:FileItem">
                    <StackPanel Width="100" Height="120" Orientation="Vertical" HorizontalAlignment="Center"
                        RightTapped="FileItem_RightTapped">
                        <FlyoutBase.AttachedFlyout>
                            <StaticResource ResourceKey="FileContextMenu"/>
                        </FlyoutBase.AttachedFlyout>
                        <Image Source="{x:Bind Thumbnail, Mode=OneWay}" Width="48" Height="48" HorizontalAlignment="Center" />
                        <TextBlock Text="{x:Bind Name}" TextWrapping="Wrap" TextAlignment="Center"/>
                    </StackPanel>
                </DataTemplate>
            </GridView.ItemTemplate>

            <GridView.ItemsPanel>
                <ItemsPanelTemplate>
                    <ItemsWrapGrid MaximumRowsOrColumns="0" Orientation="Horizontal"/>
                </ItemsPanelTemplate>
            </GridView.ItemsPanel>
        </GridView>
    </Grid>

</Page>
